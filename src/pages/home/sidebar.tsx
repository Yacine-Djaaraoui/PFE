import React, { useState } from "react";
import { Link, NavLink, useNavigate } from "react-router-dom";
import logo from "@/assets/logowithtitle.png";
import { useDispatch } from "react-redux";
import { logoutR } from "@/redux/reducers/AuthReducer";

const Sidebar = () => {
  const dispatch = useDispatch();

  const handleLogout = () => {
    localStorage.removeItem("access_token");
    localStorage.removeItem("refresh_token");
    dispatch(logoutR());
    window.location.href = "/login";
  };

  return (
    <div className="bg-white w-[17%] flex py-5 shadow-lg flex-col items-center gap-4 h-screen fixed">
      <a href="/dashboard">
        <img src={logo} alt="#" className="w-[200px]" />
      </a>
      <nav className="flex flex-col gap-1 items-start text-[16px] mt-8">
        {/* Tableau de bord */}
        <NavLink
          to="/dashboard"
          className={({ isActive }: { isActive: boolean }) =>
            `group flex items-center gap-2 py-3 pl-3 w-[200px] rounded-lg cursor-pointer font-medium ${
              isActive ? " bg-accent/15" : "  hover:bg-accent/15"
            }`
          }
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="#141B34"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M8.67489 4.752C9.65049 4.752 10.4437 5.5452 10.4437 6.5208V8.72642C10.4437 9.70202 9.65049 10.4952 8.67489 10.4952H6.46929C5.49369 10.4952 4.70049 9.70202 4.70049 8.72642V6.5208C4.70049 5.5452 5.49369 4.752 6.46929 4.752H8.67489ZM8.67489 3.552H6.46929C4.83009 3.552 3.50049 4.8816 3.50049 6.5208V8.72642C3.50049 10.3656 4.83009 11.6952 6.46929 11.6952H8.67489C10.3141 11.6952 11.6437 10.3656 11.6437 8.72642V6.5208C11.6437 4.8816 10.3141 3.552 8.67489 3.552Z" />
            <path d="M10.4434 13.5048V17.5692C10.4434 18.4956 9.68982 19.2492 8.76342 19.2492H6.37902C5.45262 19.2492 4.69902 18.4956 4.69902 17.5692V15.1848C4.69902 14.2584 5.45262 13.5048 6.37902 13.5048H10.4434ZM10.4434 12.3048H6.37902C4.78902 12.3048 3.49902 13.5948 3.49902 15.1848V17.5692C3.49902 19.1592 4.78902 20.4492 6.37902 20.4492H8.76342C10.3534 20.4492 11.6434 19.1592 11.6434 17.5692V13.5048C11.6434 12.8424 11.1058 12.3048 10.4434 12.3048Z" />
            <path d="M17.5316 4.752C18.5072 4.752 19.3004 5.5452 19.3004 6.5208V8.72642C19.3004 9.70202 18.5072 10.4952 17.5316 10.4952H13.5572V6.5208C13.5572 5.5452 14.3504 4.752 15.326 4.752H17.5316ZM17.5316 3.552H15.326C13.6868 3.552 12.3572 4.8816 12.3572 6.5208V10.4952C12.3572 11.1576 12.8948 11.6952 13.5572 11.6952H17.5316C19.1708 11.6952 20.5004 10.3656 20.5004 8.72642V6.5208C20.5004 4.8816 19.1708 3.552 17.5316 3.552Z" />
            <path d="M17.5316 13.5048C18.5072 13.5048 19.3004 14.298 19.3004 15.2736V17.4792C19.3004 18.4548 18.5072 19.248 17.5316 19.248H15.326C14.3504 19.248 13.5572 18.4548 13.5572 17.4792V15.2736C13.5572 14.298 14.3504 13.5048 15.326 13.5048H17.5316ZM17.5316 12.3048H15.326C13.6868 12.3048 12.3572 13.6344 12.3572 15.2736V17.4792C12.3572 19.1184 13.6868 20.448 15.326 20.448H17.5316C19.1708 20.448 20.5004 19.1184 20.5004 17.4792V15.2736C20.5004 13.6344 19.1708 12.3048 17.5316 12.3048Z" />
          </svg>

          <span>Tableau de bord</span>
        </NavLink>
        <NavLink
          to="/mon-projet/teams"
          className={({ isActive }: { isActive: boolean }) =>
            `group flex items-center gap-2 py-3 pl-3 w-[200px] rounded-lg cursor-pointer font-medium 
     ${isActive ? " bg-accent/15" : "  hover:bg-accent/15"}`
          }
        >
          <svg
            width="18"
            height="16"
            viewBox="0 0 18 16"
            fill="#141B34"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M15.0864 15.7628H2.92562C1.58522 15.7628 0.494423 14.6516 0.494423 13.2872V6.21079C0.486023 6.17119 0.482422 6.13038 0.482422 6.08838V2.82559C0.482422 1.39759 1.60802 0.237183 2.99282 0.237183H5.94122C6.66962 0.237183 7.36202 0.563606 7.83842 1.13121L8.35442 1.73838C8.94722 2.43438 9.81482 2.8364 10.7292 2.8364H15.0864C16.4268 2.8364 17.5176 3.94759 17.5176 5.31199V13.2884C17.5176 14.6528 16.4268 15.7628 15.0864 15.7628ZM1.68242 5.18838C1.69082 5.22798 1.69442 5.26879 1.69442 5.31079V13.2872C1.69442 13.9904 2.24642 14.5628 2.92562 14.5628H15.0864C15.7656 14.5628 16.3176 13.9904 16.3176 13.2872V5.31079C16.3176 4.60759 15.7656 4.0352 15.0864 4.0352H10.7304C9.46442 4.0352 8.26202 3.47958 7.44122 2.51478L6.92162 1.9052C6.67082 1.6064 6.31442 1.43598 5.94002 1.43598H2.99162C2.26922 1.43598 1.68122 2.05879 1.68122 2.82439V5.18838H1.68242Z" />
            <path d="M14.0242 8.69597H10.5814C10.2502 8.69597 9.98145 8.42717 9.98145 8.09597C9.98145 7.76477 10.2502 7.49597 10.5814 7.49597H14.0242C14.3554 7.49597 14.6242 7.76477 14.6242 8.09597C14.6242 8.42717 14.3554 8.69597 14.0242 8.69597Z" />
          </svg>
          Groupes
        </NavLink>
        <NavLink
          to="/mon-projet/themes"
          className={({ isActive }: { isActive: boolean }) =>
            `group flex items-center gap-2 py-3 pl-3 w-[200px] rounded-lg cursor-pointer font-medium 
     ${isActive ? " bg-accent/15" : "  hover:bg-accent/15"}`
          }
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="#141B34"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M12 4.65593C16.05 4.65593 19.3452 7.95113 19.3452 12.0011C19.3452 16.0487 16.0548 19.3415 12.0084 19.3463H12.0048C11.982 19.3451 11.9604 19.3451 11.9376 19.3451L10.728 19.3367V19.3463H6.10443C5.31003 19.3463 4.66443 18.7007 4.66443 17.9063V12.3215V12.2999L4.66324 12.2783L4.66204 12.2615C4.65844 12.1691 4.65483 12.0827 4.65483 12.0023C4.65483 11.9219 4.65844 11.8355 4.66204 11.7431L4.66324 11.7263L4.66443 11.7047V11.6903V11.6879C4.74483 9.79313 5.54284 8.02434 6.91324 6.70674C8.28604 5.38314 10.0932 4.65593 12 4.65593ZM12 3.45593C7.40283 3.45593 3.65643 7.08593 3.46443 11.6351H3.46324V11.6807C3.45964 11.7875 3.45483 11.8931 3.45483 12.0011C3.45483 12.1091 3.45844 12.2147 3.46324 12.3215V17.9063C3.46324 19.3643 4.64524 20.5463 6.10324 20.5463H11.9268V20.5439C11.9508 20.5439 11.9748 20.5463 12 20.5463C16.7196 20.5463 20.5452 16.7207 20.5452 12.0011C20.5452 7.28153 16.7196 3.45593 12 3.45593Z" />
            <path d="M10.4548 10.1531H7.16201C6.83081 10.1531 6.56201 9.88432 6.56201 9.55312C6.56201 9.22192 6.83081 8.95312 7.16201 8.95312H10.4548C10.786 8.95312 11.0548 9.22192 11.0548 9.55312C11.0548 9.88432 10.786 10.1531 10.4548 10.1531Z" />
            <path d="M13.8698 15.0083H7.16055C6.82935 15.0083 6.56055 14.7395 6.56055 14.4083C6.56055 14.0771 6.82935 13.8083 7.16055 13.8083H13.8698C14.201 13.8083 14.4698 14.0771 14.4698 14.4083C14.4698 14.7395 14.201 15.0083 13.8698 15.0083Z" />
          </svg>
          Thèmes
        </NavLink>

        {/* Messagerie */}
        <NavLink
          to="/travail"
          className={({ isActive }: { isActive: boolean }) =>
            `group flex items-center gap-2 py-3 pl-3 w-[200px] rounded-lg cursor-pointer font-medium ${
              isActive ? " bg-accent/15" : "  hover:bg-[#97B2DF]/15"
            }`
          }
        >
          <svg
            width="22"
            height="22"
            viewBox="0 0 22 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g opacity="0.6">
              <path
                d="M16 17L9 17"
                stroke="#141B34"
                stroke-width="1.8"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M16 13L13 13"
                stroke="#141B34"
                stroke-width="1.8"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M20.5 14C20.5 17.7712 20.5 19.6569 19.2552 20.8284C18.0104 22 16.0069 22 12 22H11.2273C7.96607 22 6.33546 22 5.20307 21.2022C4.87862 20.9736 4.59058 20.7025 4.3477 20.3971C3.5 19.3313 3.5 17.7966 3.5 14.7273V12.1818C3.5 9.21865 3.5 7.73706 3.96894 6.55375C4.72281 4.65142 6.31714 3.15088 8.33836 2.44135C9.59563 2 11.1698 2 14.3182 2C16.1173 2 17.0168 2 17.7352 2.2522C18.8902 2.65765 19.8012 3.5151 20.232 4.60214C20.5 5.27832 20.5 6.12494 20.5 7.81818V14Z"
                stroke="#141B34"
                stroke-width="1.8"
                stroke-linejoin="round"
              />
              <path
                d="M3.5 12C3.5 10.1591 4.99238 8.66667 6.83333 8.66667C7.49912 8.66667 8.28404 8.78333 8.93137 8.60988C9.50652 8.45576 9.95576 8.00652 10.1099 7.43136C10.2833 6.78404 10.1667 5.99912 10.1667 5.33333C10.1667 3.49238 11.6591 2 13.5 2"
                stroke="#141B34"
                stroke-width="1.8"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </g>
          </svg>

          <span>Travail</span>
        </NavLink>
        <NavLink
          to="/soutenance"
          className={({ isActive }: { isActive: boolean }) =>
            `group flex items-center gap-2 py-3 pl-3 w-[200px] rounded-lg cursor-pointer font-medium 
     ${isActive ? " bg-accent/15" : "  hover:bg-accent/15"}`
          }
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="#141B34"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M12 4.65593C16.05 4.65593 19.3452 7.95113 19.3452 12.0011C19.3452 16.0487 16.0548 19.3415 12.0084 19.3463H12.0048C11.982 19.3451 11.9604 19.3451 11.9376 19.3451L10.728 19.3367V19.3463H6.10443C5.31003 19.3463 4.66443 18.7007 4.66443 17.9063V12.3215V12.2999L4.66324 12.2783L4.66204 12.2615C4.65844 12.1691 4.65483 12.0827 4.65483 12.0023C4.65483 11.9219 4.65844 11.8355 4.66204 11.7431L4.66324 11.7263L4.66443 11.7047V11.6903V11.6879C4.74483 9.79313 5.54284 8.02434 6.91324 6.70674C8.28604 5.38314 10.0932 4.65593 12 4.65593ZM12 3.45593C7.40283 3.45593 3.65643 7.08593 3.46443 11.6351H3.46324V11.6807C3.45964 11.7875 3.45483 11.8931 3.45483 12.0011C3.45483 12.1091 3.45844 12.2147 3.46324 12.3215V17.9063C3.46324 19.3643 4.64524 20.5463 6.10324 20.5463H11.9268V20.5439C11.9508 20.5439 11.9748 20.5463 12 20.5463C16.7196 20.5463 20.5452 16.7207 20.5452 12.0011C20.5452 7.28153 16.7196 3.45593 12 3.45593Z" />
            <path d="M10.4548 10.1531H7.16201C6.83081 10.1531 6.56201 9.88432 6.56201 9.55312C6.56201 9.22192 6.83081 8.95312 7.16201 8.95312H10.4548C10.786 8.95312 11.0548 9.22192 11.0548 9.55312C11.0548 9.88432 10.786 10.1531 10.4548 10.1531Z" />
            <path d="M13.8698 15.0083H7.16055C6.82935 15.0083 6.56055 14.7395 6.56055 14.4083C6.56055 14.0771 6.82935 13.8083 7.16055 13.8083H13.8698C14.201 13.8083 14.4698 14.0771 14.4698 14.4083C14.4698 14.7395 14.201 15.0083 13.8698 15.0083Z" />
          </svg>
          Soutenance
        </NavLink>
        {/* Profile */}
        <NavLink
          to="/settings"
          className={({ isActive }: { isActive: boolean }) =>
            `group flex items-center gap-2 py-3 pl-3 w-[200px] rounded-lg cursor-pointer font-medium 
     ${isActive ? " bg-accent/15" : "  hover:bg-accent/15"}`
          }
        >
          <svg
            width="22"
            height="22"
            viewBox="0 0 22 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M20.3175 6.14139L19.8239 5.28479C19.4506 4.63696 19.264 4.31305 18.9464 4.18388C18.6288 4.05472 18.2696 4.15664 17.5513 4.36048L16.3311 4.70418C15.8725 4.80994 15.3913 4.74994 14.9726 4.53479L14.6357 4.34042C14.2766 4.11043 14.0004 3.77133 13.8475 3.37274L13.5136 2.37536C13.294 1.71534 13.1842 1.38533 12.9228 1.19657C12.6615 1.00781 12.3143 1.00781 11.6199 1.00781H10.5051C9.81078 1.00781 9.4636 1.00781 9.20223 1.19657C8.94085 1.38533 8.83106 1.71534 8.61149 2.37536L8.27753 3.37274C8.12465 3.77133 7.84845 4.11043 7.48937 4.34042L7.15249 4.53479C6.73374 4.74994 6.25259 4.80994 5.79398 4.70418L4.57375 4.36048C3.85541 4.15664 3.49625 4.05472 3.17867 4.18388C2.86109 4.31305 2.67445 4.63696 2.30115 5.28479L1.80757 6.14139C1.45766 6.74864 1.2827 7.05227 1.31666 7.37549C1.35061 7.69871 1.58483 7.95918 2.05326 8.48012L3.0843 9.63282C3.3363 9.95185 3.51521 10.5078 3.51521 11.0077C3.51521 11.5078 3.33636 12.0636 3.08433 12.3827L2.05326 13.5354C1.58483 14.0564 1.35062 14.3168 1.31666 14.6401C1.2827 14.9633 1.45766 15.2669 1.80757 15.8741L2.30114 16.7307C2.67443 17.3785 2.86109 17.7025 3.17867 17.8316C3.49625 17.9608 3.85542 17.8589 4.57377 17.655L5.79394 17.3113C6.25263 17.2055 6.73387 17.2656 7.15267 17.4808L7.4895 17.6752C7.84851 17.9052 8.12464 18.2442 8.2775 18.6428L8.61149 19.6403C8.83106 20.3003 8.94085 20.6303 9.20223 20.8191C9.4636 21.0078 9.81078 21.0078 10.5051 21.0078H11.6199C12.3143 21.0078 12.6615 21.0078 12.9228 20.8191C13.1842 20.6303 13.294 20.3003 13.5136 19.6403L13.8476 18.6428C14.0004 18.2442 14.2765 17.9052 14.6356 17.6752L14.9724 17.4808C15.3912 17.2656 15.8724 17.2055 16.3311 17.3113L17.5513 17.655C18.2696 17.8589 18.6288 17.9608 18.9464 17.8316C19.264 17.7025 19.4506 17.3785 19.8239 16.7307L20.3175 15.8741C20.6674 15.2669 20.8423 14.9633 20.8084 14.6401C20.7744 14.3168 20.5402 14.0564 20.0718 13.5354L19.0407 12.3827C18.7887 12.0636 18.6098 11.5078 18.6098 11.0077C18.6098 10.5078 18.7888 9.95185 19.0407 9.63282L20.0718 8.48012C20.5402 7.95918 20.7744 7.69871 20.8084 7.37549C20.8423 7.05227 20.6674 6.74864 20.3175 6.14139Z"
              stroke="#141B34"
              stroke-width="1.2"
              stroke-linecap="round"
            />
            <path
              d="M14.5195 11C14.5195 12.933 12.9525 14.5 11.0195 14.5C9.08653 14.5 7.51953 12.933 7.51953 11C7.51953 9.067 9.08653 7.5 11.0195 7.5C12.9525 7.5 14.5195 9.067 14.5195 11Z"
              stroke="#141B34"
              stroke-width="1.2"
            />
          </svg>
          Paramètres
        </NavLink>
      </nav>
      <NavLink
        to="/help"
        className={({ isActive }: { isActive: boolean }) =>
          `group flex mb-0 mt-auto  items-center gap-2 py-3 pl-3 w-[200px] rounded-lg cursor-pointer font-medium ${
            isActive ? " bg-accent/15" : "  hover:bg-[#97B2DF]/15"
          }`
        }
      >
        <svg
          width="22"
          height="22"
          viewBox="0 0 22 22"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g opacity="0.6">
            <path
              d="M16 17L9 17"
              stroke="#141B34"
              stroke-width="1.8"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M16 13L13 13"
              stroke="#141B34"
              stroke-width="1.8"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M20.5 14C20.5 17.7712 20.5 19.6569 19.2552 20.8284C18.0104 22 16.0069 22 12 22H11.2273C7.96607 22 6.33546 22 5.20307 21.2022C4.87862 20.9736 4.59058 20.7025 4.3477 20.3971C3.5 19.3313 3.5 17.7966 3.5 14.7273V12.1818C3.5 9.21865 3.5 7.73706 3.96894 6.55375C4.72281 4.65142 6.31714 3.15088 8.33836 2.44135C9.59563 2 11.1698 2 14.3182 2C16.1173 2 17.0168 2 17.7352 2.2522C18.8902 2.65765 19.8012 3.5151 20.232 4.60214C20.5 5.27832 20.5 6.12494 20.5 7.81818V14Z"
              stroke="#141B34"
              stroke-width="1.8"
              stroke-linejoin="round"
            />
            <path
              d="M3.5 12C3.5 10.1591 4.99238 8.66667 6.83333 8.66667C7.49912 8.66667 8.28404 8.78333 8.93137 8.60988C9.50652 8.45576 9.95576 8.00652 10.1099 7.43136C10.2833 6.78404 10.1667 5.99912 10.1667 5.33333C10.1667 3.49238 11.6591 2 13.5 2"
              stroke="#141B34"
              stroke-width="1.8"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </g>
        </svg>

        <span>Aide</span>
      </NavLink>
      <div
        onClick={handleLogout}
        className={` hover:bg-accent/15 group flex items-center gap-2 py-3 pl-3 mb-2 mt-0 w-[200px] rounded-lg cursor-pointer font-medium 
   `}
      >
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g opacity="0.6">
            <path
              d="M15 17.625C14.9264 19.4769 13.3831 21.0494 11.3156 20.9988C10.8346 20.987 10.2401 20.8194 9.05112 20.484C6.18961 19.6768 3.70555 18.3203 3.10956 15.2815C3 14.723 3 14.0944 3 12.8373L3 11.1627C3 9.90561 3 9.27705 3.10956 8.71846C3.70555 5.67965 6.18961 4.32316 9.05112 3.51603C10.2401 3.18064 10.8346 3.01295 11.3156 3.00119C13.3831 2.95061 14.9264 4.52307 15 6.37501"
              stroke="#141B34"
              stroke-width="1.8"
              stroke-linecap="round"
            />
            <path
              d="M21 12H10M21 12C21 11.2998 19.0057 9.99153 18.5 9.5M21 12C21 12.7002 19.0057 14.0085 18.5 14.5"
              stroke="#141B34"
              stroke-width="1.8"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </g>
        </svg>
        Se déconnecter
      </div>
    </div>
  );
};

export default Sidebar;
